<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Features & Tools</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { background: #f0f2f5; padding: 20px; padding-top: 80px; }

        /* HEADER */
        .header {
            position: fixed; top: 0; left: 0; right: 0;
            display: flex; align-items: center; gap: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 15px; color: white; z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .back-btn { 
            background: rgba(255,255,255,0.2); border: none; color: white;
            width: 40px; height: 40px; border-radius: 50%; font-size: 20px; 
            display: flex; align-items: center; justify-content: center; text-decoration: none; cursor: pointer;
        }

        /* CARDS */
        .card { background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .card-title { font-size: 14px; font-weight: 700; color: #667eea; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }

        /* THEME */
        .theme-row { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .color-circle { width: 45px; height: 45px; border-radius: 50%; cursor: pointer; border: 3px solid transparent; transition: transform 0.2s; }
        .color-circle:active { transform: scale(0.9); }

        /* BUTTONS GRID */
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .box-btn { 
            border: 2px solid #eee; border-radius: 15px; padding: 15px 5px; 
            text-align: center; cursor: pointer; background: white; transition: 0.2s;
            display: flex; flex-direction: column; align-items: center; gap: 5px;
        }
        .box-btn:active { background: #f0f0ff; border-color: #667eea; transform: scale(0.95); }
        .emoji { font-size: 28px; }
        .label { font-size: 11px; font-weight: 600; color: #555; }

        /* LARGE BUTTONS */
        .btn-large {
            width: 100%; padding: 15px; border: none; border-radius: 12px;
            font-size: 15px; font-weight: 600; color: white; cursor: pointer;
            margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-large:active { transform: scale(0.98); }
        .btn-blue { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .btn-red { background: linear-gradient(135deg, #ff416c, #ff4b2b); }
        .btn-green { background: linear-gradient(135deg, #43e97b, #38f9d7); }

        /* NOTIFICATION */
        .notification {
            position: fixed; top: 80px; right: 20px; background: white; padding: 15px; 
            border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
            display: none; border-left: 5px solid #667eea; z-index: 2000;
        }
    </style>
</head>
<body>

    <div class="header">
        <a href="dashboard.html" class="back-btn">â†</a>
        <h3>âš¡ Features</h3>
    </div>

    <div id="notif" class="notification">Command Sent!</div>

    <div class="card">
        <div class="card-title">ğŸ¨ Theme</div>
        <div class="theme-row">
            <div class="color-circle" style="background: linear-gradient(135deg, #667eea, #764ba2);" onclick="setTheme('#667eea', '#764ba2')"></div>
            <div class="color-circle" style="background: linear-gradient(135deg, #ff758c, #ff7eb3);" onclick="setTheme('#ff758c', '#ff7eb3')"></div>
            <div class="color-circle" style="background: linear-gradient(135deg, #4facfe, #00f2fe);" onclick="setTheme('#4facfe', '#00f2fe')"></div>
            <div class="color-circle" style="background: linear-gradient(135deg, #43e97b, #38f9d7);" onclick="setTheme('#43e97b', '#38f9d7')"></div>
        </div>
    </div>

    <div class="card">
        <div class="card-title">ğŸ˜Š Mood</div>
        <div class="grid-3">
            <div class="box-btn" onclick="sendMsg('I am Happy! ğŸ˜Š')"><span class="emoji">ğŸ˜Š</span><span class="label">Happy</span></div>
            <div class="box-btn" onclick="sendMsg('I am Sad ğŸ˜”')"><span class="emoji">ğŸ˜”</span><span class="label">Sad</span></div>
            <div class="box-btn" onclick="sendMsg('Feeling Loved ğŸ˜')"><span class="emoji">ğŸ˜</span><span class="label">Love</span></div>
            <div class="box-btn" onclick="sendMsg('I am Angry ğŸ˜¡')"><span class="emoji">ğŸ˜¡</span><span class="label">Angry</span></div>
            <div class="box-btn" onclick="sendMsg('So Tired ğŸ˜´')"><span class="emoji">ğŸ˜´</span><span class="label">Tired</span></div>
            <div class="box-btn" onclick="sendMsg('Excited! ğŸ¤©')"><span class="emoji">ğŸ¤©</span><span class="label">Excited</span></div>
        </div>
    </div>

    <div class="card">
        <div class="card-title">ğŸ“ Location & Safety</div>
        <button class="btn-large btn-blue" onclick="shareLoc()">ğŸ“ Share Location</button>
        <button class="btn-large btn-red" onclick="sendMsg('ğŸš¨ EMERGENCY! HELP! ğŸš¨')">ğŸš¨ EMERGENCY ALERT</button>
    </div>

    <div class="card">
        <div class="card-title">âš¡ Quick Send</div>
        <div class="grid-3">
            <div class="box-btn" onclick="sendMsg('Miss You ğŸ’•')"><span class="emoji">ğŸ’•</span><span class="label">Miss You</span></div>
            <div class="box-btn" onclick="sendMsg('Call Me ğŸ“')"><span class="emoji">ğŸ“</span><span class="label">Call Me</span></div>
            <div class="box-btn" onclick="sendMsg('Good Night ğŸŒ™')"><span class="emoji">ğŸŒ™</span><span class="label">Night</span></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // --- 1. CONFIGURATION (ASLI WALI) ---
        const firebaseConfig = {
          apiKey: "AIzaSyD9izkgUqK9kmxiUd2lsdpgs5Krpkve68E",
          authDomain: "mychattapp-a5fcc.firebaseapp.com",
          databaseURL: "https://mychattapp-a5fcc-default-rtdb.firebaseio.com",
          projectId: "mychattapp-a5fcc",
          storageBucket: "mychattapp-a5fcc.firebasestorage.app",
          messagingSenderId: "265732110927",
          appId: "1:265732110927:web:de60478c1303bca701083a"
        };
        
        // Initialize Firebase
        try {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.database();
            console.log("Firebase Connected");
        } catch(e) {
            alert("Firebase Error: " + e.message);
        }

        // Get User
        const user = localStorage.getItem('currentUser');
        if (!user) window.location.href = 'index.html';

        // --- 2. FUNCTIONS ---

        // Send Message Function
        function sendMsg(text) {
            if(!text) return;
            
            // Database mein bhejo
            firebase.database().ref('messages').push({
                sender: user,
                text: text,
                time: Date.now(),
                type: 'text'
            }).then(() => {
                showNotif("Sent: " + text);
            }).catch((error) => {
                alert("Error sending: " + error.message);
            });
        }

        // Share Location Function
        function shareLoc() {
            if (!navigator.geolocation) return alert('Geolocation not supported');
            
            showNotif("Getting Location...");
            
            navigator.geolocation.getCurrentPosition(pos => {
                const url = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                
                firebase.database().ref('messages').push({
                    sender: user,
                    text: url,
                    time: Date.now(),
                    type: 'location'
                });
                showNotif("Location Sent!");
            }, err => {
                alert("Location Error: " + err.message);
            });
        }

        // Set Theme Function
        function setTheme(c1, c2) {
            localStorage.setItem('theme', JSON.stringify({ primary: c1, secondary: c2 }));
            showNotif("Theme Updated! Go back to check.");
        }

        // Show Notification
        function showNotif(msg) {
            const el = document.getElementById('notif');
            el.innerText = msg;
            el.style.display = 'block';
            setTimeout(() => el.style.display = 'none', 3000);
        }
    </script>
</body>
</html>
